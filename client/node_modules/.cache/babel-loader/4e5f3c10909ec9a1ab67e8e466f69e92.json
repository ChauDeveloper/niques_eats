{"ast":null,"code":"var _jsxFileName = \"/Users/chau/UCF_BC/projects/niques_eats/client/src/components/checkout-info/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport \"../checkout-info/style.css\";\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { ADD_MULTIPLE_TO_CART } from \"../../utils/actions\";\nimport { idbPromise } from \"../../utils/helpers\";\nimport { QUERY_CHECKOUT } from \"../../utils/queries\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { useLazyQuery } from \"@apollo/client\";\nimport spinner from \"../../assets/spinner.gif\";\nimport PaymentBtn from \"../PaymentBtn\";\nimport { useStripe, useElements, PaymentElement } from '@stripe/react-stripe-js'; // const stripePromise = loadStripe(\"pk_test_TYooMQauvdEDq54NiTphI7jx\");\n\nexport default function CheckoutInfo() {\n  const flState = \"Florida\";\n  const flCity = \"Orlando\";\n  const [formData, setFormData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    address: \"\",\n    address2: \"\",\n    zipCode: \"\",\n    email: \"\",\n    phone: \"\"\n  });\n  const [getCheckout, {\n    loading,\n    data\n  }] = useLazyQuery(QUERY_CHECKOUT);\n  const [state, dispatch] = useStoreContext();\n\n  function handleChange(e) {\n    setFormData({ ...formData,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  useEffect(() => {\n    async function getCart() {\n      const cart = await idbPromise(\"cart\", \"get\");\n      dispatch({\n        type: ADD_MULTIPLE_TO_CART,\n        products: [...cart]\n      });\n    }\n\n    if (!state.cart.length) {\n      getCart();\n    }\n  }, [state.cart.length, dispatch]);\n  useEffect(() => {\n    if (data) {\n      stripePromise.then(res => {\n        res.redirectToCheckout({\n          sessionId: data.checkout.session\n        });\n      });\n    }\n  }, [data]);\n\n  function submitCheckout() {\n    console.log({\n      form: { ...formData,\n        flCity,\n        flState\n      },\n      products: state.cart\n    });\n    const stripe = useStripe();\n    const elements = useElements();\n    const productIds = [];\n    state.cart.forEach(item => {\n      for (let i = 0; i < item.purchaseQuantity; i++) {\n        productIds.push(item._id);\n      }\n    });\n    getCheckout({\n      variables: {\n        products: productIds\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-prompt mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 8\n    }\n  }, \"Already have an account?\", \" \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"u\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 10\n    }\n  }, \"Log in\")), \" \", \"for a faster checkout\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, \"DELIVERY METHOD\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    value: \"DELIVER\",\n    className: \"deliver-method deliver\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    value: \"PICKUP\",\n    className: \"deliver-method pickup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 8\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row row mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col padding-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"First name*\",\n    \"aria-label\": \"First name\",\n    name: \"firstName\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Last name*\",\n    \"aria-label\": \"Last name\",\n    onChange: handleChange,\n    name: \"lastName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 8\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-9 padding-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Address*\",\n    \"aria-label\": \"Address\",\n    onChange: handleChange,\n    name: \"address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Apt, suite, etc.\",\n    \"aria-label\": \"Apt\",\n    onChange: handleChange,\n    name: \"address2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 8\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-5 padding-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    placeholder: flCity,\n    \"aria-label\": flCity,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    placeholder: flState,\n    \"aria-label\": flState,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Zip Code*\",\n    \"aria-label\": \"Zip Code\",\n    onChange: handleChange,\n    name: \"zipCode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 8\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8 padding-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Email*\",\n    \"aria-label\": \"Email\",\n    onChange: handleChange,\n    name: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Phone Number*\",\n    \"aria-label\": \"Phone Number\",\n    onChange: handleChange,\n    name: \"phone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 8\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"img\", {\n    src: spinner,\n    alt: \"loading\",\n    id: \"spinner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }\n  }) : null, /*#__PURE__*/React.createElement(PaymentElement, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"cont-btn\",\n    onClick: submitCheckout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 8\n    }\n  }, \"Continue to Payment\"))))));\n}","map":{"version":3,"sources":["/Users/chau/UCF_BC/projects/niques_eats/client/src/components/checkout-info/index.js"],"names":["React","useEffect","useState","useStoreContext","ADD_MULTIPLE_TO_CART","idbPromise","QUERY_CHECKOUT","loadStripe","useLazyQuery","spinner","PaymentBtn","useStripe","useElements","PaymentElement","CheckoutInfo","flState","flCity","formData","setFormData","firstName","lastName","address","address2","zipCode","email","phone","getCheckout","loading","data","state","dispatch","handleChange","e","target","name","value","getCart","cart","type","products","length","stripePromise","then","res","redirectToCheckout","sessionId","checkout","session","submitCheckout","console","log","form","stripe","elements","productIds","forEach","item","i","purchaseQuantity","push","_id","variables"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"../checkout-info/style.css\";\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { ADD_MULTIPLE_TO_CART } from \"../../utils/actions\";\nimport { idbPromise } from \"../../utils/helpers\";\nimport { QUERY_CHECKOUT } from \"../../utils/queries\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { useLazyQuery } from \"@apollo/client\";\nimport spinner from \"../../assets/spinner.gif\";\nimport PaymentBtn from \"../PaymentBtn\";\n\nimport {useStripe, useElements, PaymentElement} from '@stripe/react-stripe-js';\n// const stripePromise = loadStripe(\"pk_test_TYooMQauvdEDq54NiTphI7jx\");\n\n\n\nexport default function CheckoutInfo() {\n\tconst flState = \"Florida\";\n\tconst flCity = \"Orlando\";\n\t\n\tconst [formData, setFormData] = useState({\n\t\tfirstName: \"\",\n\t\tlastName: \"\",\n\t\taddress: \"\",\n\t\taddress2: \"\",\n\t\tzipCode: \"\",\n\t\temail: \"\",\n\t\tphone: \"\",\n\t});\n\n\tconst [getCheckout, { loading, data }] = useLazyQuery(QUERY_CHECKOUT);\n\tconst [state, dispatch] = useStoreContext();\n\n\tfunction handleChange(e) {\n\t\tsetFormData({\n\t\t\t...formData,\n\t\t\t[e.target.name]: e.target.value,\n\t\t});\n\t}\n\n\tuseEffect(() => {\n\t\tasync function getCart() {\n\t\t\tconst cart = await idbPromise(\"cart\", \"get\");\n\t\t\tdispatch({ type: ADD_MULTIPLE_TO_CART, products: [...cart] });\n\t\t}\n\n\t\tif (!state.cart.length) {\n\t\t\tgetCart();\n\t\t}\n\t}, [state.cart.length, dispatch]);\n\n\tuseEffect(() => {\n\t\tif (data) {\n\t\t\tstripePromise.then((res) => {\n\t\t\t\tres.redirectToCheckout({ sessionId: data.checkout.session });\n\t\t\t});\n\t\t}\n\t}, [data]);\n\n\tfunction submitCheckout() {\n\t\tconsole.log({\n\t\t\tform: {\n\t\t\t\t...formData,\n\t\t\t\tflCity,\n\t\t\t\tflState,\n\t\t\t},\n\t\t\tproducts: state.cart,\n\t\t});\n\t\tconst stripe = useStripe();\n\t\tconst elements = useElements();\n\t\tconst productIds = [];\n\n\t\tstate.cart.forEach((item) => {\n\t\t\tfor (let i = 0; i < item.purchaseQuantity; i++) {\n\t\t\t\tproductIds.push(item._id);\n\t\t\t}\n\t\t});\n\n\t\tgetCheckout({\n\t\t\tvariables: { products: productIds },\n\t\t});\n\t}\n\n\treturn (\n\t\t<div className=\"col-2\">\n\t\t\t{/* container start */}\n\t\t\t<div class=\"container\">\n\t\t\t\t{/* whole column begin */}\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t{/* Only column begin */}\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t{/* Header */}\n\n\t\t\t\t\t\t<div className=\"login-prompt mb-3\">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tAlready have an account?{\" \"}\n\t\t\t\t\t\t\t\t<a href=\"/login\">\n\t\t\t\t\t\t\t\t\t<u>Log in</u>\n\t\t\t\t\t\t\t\t</a>{\" \"}\n\t\t\t\t\t\t\t\tfor a faster checkout\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* buttons */}\n\t\t\t\t\t\t<p className=\"mt-4\">DELIVERY METHOD</p>\n\t\t\t\t\t\t<div className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tvalue=\"DELIVER\"\n\t\t\t\t\t\t\t\tclassName=\"deliver-method deliver\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tvalue=\"PICKUP\"\n\t\t\t\t\t\t\t\tclassName=\"deliver-method pickup\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* only column end */}\n\t\t\t\t</div>\n\t\t\t\t{/* ^ whole column end */}\n\t\t\t\t{/* FORM COlumn start */}\n\t\t\t\t<div class=\"container\">\n\t\t\t\t\t<div class=\"row row mt-5\">\n\t\t\t\t\t\t{/* first name */}\n\t\t\t\t\t\t<div class=\"col padding-left\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"First name*\"\n\t\t\t\t\t\t\t\taria-label=\"First name\"\n\t\t\t\t\t\t\t\tname=\"firstName\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* last name */}\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Last name*\"\n\t\t\t\t\t\t\t\taria-label=\"Last name\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tname=\"lastName\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* Address row pt.1*/}\n\t\t\t\t\t<div className=\"row mt-3\">\n\t\t\t\t\t\t{/* Address */}\n\t\t\t\t\t\t<div className=\"col-9 padding-left\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Address*\"\n\t\t\t\t\t\t\t\taria-label=\"Address\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tname=\"address\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* APT */}\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Apt, suite, etc.\"\n\t\t\t\t\t\t\t\taria-label=\"Apt\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tname=\"address2\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* Address row pt.2  */}\n\t\t\t\t\t<div className=\"row mt-3\">\n\t\t\t\t\t\t{/* City */}\n\t\t\t\t\t\t<div className=\"col-5 padding-left\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder={flCity}\n\t\t\t\t\t\t\t\taria-label={flCity}\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* state */}\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder={flState}\n\t\t\t\t\t\t\t\taria-label={flState}\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* zip code */}\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Zip Code*\"\n\t\t\t\t\t\t\t\taria-label=\"Zip Code\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tname=\"zipCode\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* Email/Phone */}\n\t\t\t\t\t<div className=\"row mt-3\">\n\t\t\t\t\t\t{/* email */}\n\t\t\t\t\t\t<div className=\"col-8 padding-left\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Email*\"\n\t\t\t\t\t\t\t\taria-label=\"Email\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* phone */}\n\t\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Phone Number*\"\n\t\t\t\t\t\t\t\taria-label=\"Phone Number\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tname=\"phone\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* Payment */}\n\t\t\t\t\t<div class=\"row mt-5\">\n\t\t\t\t\t\t<div className=\"col d-flex justify-content-center\">\n\t\t\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t\t\t<img src={spinner} alt=\"loading\" id=\"spinner\" />\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<PaymentElement />\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclassName=\"cont-btn\"\n\t\t\t\t\t\t\t\tonClick={submitCheckout}\n\t\t\t\t\t\t\t>Continue to Payment\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{/* form column end */}\n\t\t\t</div>\n\t\t\t{/* ^ containder end */}\n\t\t</div>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}